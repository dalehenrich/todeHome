TDScriptLeafNode{#name:'basic',#contents:'[ :topez :objIn :tokens :command | \n| opts args tree population populationIndexSpec result |\ncommand\n  getOptsMixedLongShort:\n    {#(\'clean \' $x #\'none\').\n    #(\'create\' $c #\'none\').\n    #(\'halt\' nil #\'none\').\n    #(\'help\' $h #\'none\')}\n  optionsAndArguments: [ :options :arguments | \n    opts := options.\n    args := arguments ].\ntree := (topez lookup: \'/home/index/family\') dotSelfObject.\npopulation := tree population.\npopulationIndexSpec := GsIndexSpec new\n  equalityIndex: \'each.firstName\' lastElementClass: String;\n  yourself.\nIndexManager current removeAllIncompleteIndexesOn: population.\n[ \nopts\n  at: \'create\'\n  ifPresent: [ :ignored | populationIndexSpec createIndexesOn: population ].\nopts\n  at: \'halt\'\n  ifPresent: [ :ignored | \n    population halt.\n    population ]\n  ifAbsent: [ result := population select: { :each | each.firstName < nil } ] ]\n  ensure: [ IndexManager current removeAllIncompleteIndexesOn: population ].\nopts\n  at: \'clean\'\n  ifPresent: [ :ignored | populationIndexSpec removeIndexesFrom: population ].\nopts at: \'help\' ifPresent: [ :ignored | TDManPage viewManPage: \'NAME\n  basic - QueryBlock select query\nSYNOPSIS\n  basic [-h|--help] [-x|--clean] [-c|--create] [--halt]\nDESCRIPTION\n  Run a QueryBlock query against the population in `/home/index/family`. Index\n  created against `each.firstName`. With no options specified the query is run\n  against the population. The script answers the result of the query. \n\n  -c,  --create   creates an index on the population collection\n  -x,  --clean    removes index from the population collection\n       --halt     halts after the index is created\n  -h,  --help     producce this message    \n\' topez: topez ].\nresult ]',#creationTime:DateAndTime['2013-12-06T17:02:00.3797070980072-08:00'],#modificationTime:@2}